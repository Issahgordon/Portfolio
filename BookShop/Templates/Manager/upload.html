<!DOCTYPE html>
<html lang="en">
  {% load static %}
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Connect Plus</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="{% get_static_prefix %}Manager/assets/vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="{% get_static_prefix %}Manager/assets/vendors/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" href="{% get_static_prefix %}Manager/assets/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="{% get_static_prefix %}Manager/assets/vendors/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="{% get_static_prefix %}Manager/assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.css">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="{% get_static_prefix %}Manager/assets/css/style.css">
    <!-- End layout styles -->
    <link rel="shortcut icon" href="{% get_static_prefix %}Manager/assets/images/favicon.png" />
  </head>
  <style>
    .upload-btn-wrapper {
    position: relative;
    overflow: hidden;
    display: inline-block;
    cursor: pointer;
    }	  
    .upload-btn-wrapper input[type=file] {
    font-size: 100px;
    position: absolute;
    left: 0;
    top: 0;
    cursor: pointer;
    width: 50%;
    opacity: 0;
    }
    </style>
  <body>
    <div class="container-scroller">
      <!-- partial:partials/_navbar.html -->
       {% include 'Manager/header.html'%}
             
        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">
            <div class="row" id="proBanner">
              <div class="col-12">
                <span class="d-flex align-items-center purchase-popup">
                  <p>Do you want learn how to use the dashboard.</p>
                  <a href="https://github.com/BootstrapDash/ConnectPlusAdmin-Free-Bootstrap-Admin-Template" target="_blank" class="btn ml-auto download-button">Learn On Youtube</a>
                  <a href="http://www.bootstrapdash.com/demo/connect-plus/jquery/template/" target="_blank" class="btn purchase-button">Documentation</a>
                  <i class="mdi mdi-close" id="bannerClose"></i>
                </span>
              </div>
            </div>
            <div class="d-xl-flex justify-content-between align-items-start">
              <h2 class="text-dark font-weight-bold mb-2"> Overview dashboard </h2>
              <div class="d-sm-flex justify-content-xl-between align-items-center mb-2">
                <div class="btn-group bg-white p-3" role="group" aria-label="Basic example">
                  <button type="button" class="btn btn-link text-light py-0 border-right">7 Days</button>
                  <button type="button" class="btn btn-link text-dark py-0 border-right">1 Month</button>
                  <button type="button" class="btn btn-link text-light py-0">3 Month</button>
                </div>
                <div class="dropdown ml-0 ml-md-4 mt-2 mt-lg-0">
                  <button class="btn bg-white dropdown-toggle p-3 d-flex align-items-center" type="button" id="dropdownMenuButton1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="mdi mdi-calendar mr-1"></i>24 Mar 2019 - 24 Mar 2019 </button>
                  <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton1">
                    <h6 class="dropdown-header">Settings</h6>
                    <a class="dropdown-item" href="#">Action</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <a class="dropdown-item" href="#">Something else here</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#">Separated link</a>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="d-sm-flex justify-content-between align-items-center transaparent-tab-border {">
                  
                  <div class="d-md-block d-none">
                    <a href="#" class="text-light p-1"><i class="mdi mdi-view-dashboard"></i></a>
                    <a href="#" class="text-light p-1"><i class="mdi mdi-dots-vertical"></i></a>
                  </div>
                </div>
                <div class="tab-content tab-transparent-content">
                  <div class="tab-pane fade show active" id="business-1" role="tabpanel" aria-labelledby="business-tab">
                    <div class="card-body" >
                      <form action="" method="post" enctype="multipart/form-data" >
                        <div style="padding-top: 20px;"></div>
              
                              <div style="text-align: center;" id="fat" class="result">
                                <img style="border-radius: 2px;width:200px;height:200px " src="{% get_static_prefix %}Home/images/single-image.jpg">
                                
                                </div>
                                
                        
                                {% csrf_token %} 
                        <div style="text-align: center;" class="box">
                          <div style="padding-top: 20px;"></div>
                          <div class="upload-btn-wrapper">
                          <button  class="btn btn-light btn-block">Select image</button>
                         
                          <input  class="mdc-text-field__input" required  id="file-input" style="width: 100%;" type="file" name="New_Img" accept="image/*" />
                          </div>
                          <script>
                    
                          // vars
                          let result = document.getElementById("fat"),
                          upload = document.getElementById("file-input"),
                          
                          cropper = '';
                          
                          // on change show image with crop options
                          upload.addEventListener('change', (e) => {
                            if (e.target.files.length) {
                            
                            const reader = new FileReader();
                            reader.onload = (e)=> {
                              if(e.target.result){
                              console.log(e);
                              
                              let img = document.createElement('img');
                              img.id = 'image';
                              img.src = e.target.result;
                              console.log(e.target.result);
                              img.style = "border-radius: 2px;width:200px;height:200px"
                              
                              result.innerHTML = '';
                              
                              result.appendChild(img);
                              // show save btn and options
                              save.classList.remove('hide');
                              options.classList.remove('hide');
                              // init cropper
                              cropper = new Cropper(img);
                              }
                            };
                            reader.readAsDataURL(e.target.files[0]);
                            }
                          });
                          </script>
                        </div>
                        <div class="row col-lg-12 col-md-12 col-sm-12"  >
                          <div  class="col-lg-8 col-md-12 col-sm-12">
                            <div class="form-group">
                              <label class="form-label">Book Name</label>
                              <input type="text" name="Name" required  class="form-control">
                            </div>
                          </div>
                          <div class="col-lg-4 col-md-6 col-sm-12">
                            <div class="form-group">
                              <label class="form-label">Select Book</label>
                              <input class="form-control" required name="Book"  type="file">

                            </div>
                          </div>
                          
                          <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                              <label class="form-label">Book Category</label>
                              <select  name="Category" required class="form-control">
                                
                                <option value="">Select a Category</option>
                                <optgroup label="Fiction">
                                  <option >Action and Adventure</option>
                                  <option >Classics</option>
                                  <option >Fantasy</option>
                                  <option >Historical Fiction</option>
                                  <option >Horror</option>
                                  <option >Mystery and Thrillers</option>
                                  <option >Romance</option>
                                  <option >Science Fiction</option>
                                  <option >Short Stories</option>
                                </optgroup>
                                <optgroup label="Non-Fiction">
                                  <option >Biographies and Memoirs</option>
                                  <option >Business</option>
                                  <option >Cookbooks</option>
                                  <option >Health and Fitness</option>
                                  <option >History</option>
                                  <option >Self-Help</option>
                                  <option >Travel</option>
                                </optgroup>
                                <optgroup label="Children's Books">
                                  <option >Picture Books</option>
                                  <option >Chapter Books</option>
                                  <option >Young Adult</option>
                                </optgroup>
                              </select>
                            </div>
                          </div>
                          <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="form-group">
                              <label class="form-label">Book Rating</label>
                              <input type="range" max="100" min="0" name="Rate" required class="form-control">
                            </div>
                          </div>
                          
                          
                          
                          
                          
                          
                          <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="form-group">
                              <label class="form-label">About Student</label>
                              <textarea name="About" required class="form-control" rows="5" minlength="100" placeholder="Tell us about your book.."></textarea>
                            </div>
                          </div>
                          
                          <div class="col-lg-12 col-md-12 col-sm-12">
                            <button type="submit" class="btn btn-primary">Submit</button>
                            
                          </div>
                        </div>
                      </form>
                    </div>
              
                      
                   
                    <div class="col-lg-12 grid-margin stretch-card">
                      <div class="card">
                        <div class="card-body ">
                          <h4 class="card-title">My Uploaded Books</h4>
                          
                          </p>
                          
                          <table class="table table-striped table-hover ta ">
                            <thead>
                              <tr>
                                <th> Cover </th>
                                <th> Book Name </th>
                                <th> Book Rating </th>
                                <th> Book Category </th>
                                <th> Date Added </th>
                                <th> Delete Book </th>

                              </tr>
                            </thead>
                            <tbody>

                              {% for i in Books %}
                              <tr id="{{i.id}}">
                                <td class="py-1">
                                  <img src="{% get_media_prefix %}Covers/{{i.id}}.jpg" alt="image">
                                </td>
                                <td> {{i.Name}} </td>
                                <td>
                                  <div class="progress">
                                    <div class="progress-bar bg-success" role="progressbar" style="width: {{i.Rate}}%" aria-valuenow="{{i.Rate}}" aria-valuemin="0" aria-valuemax="100"></div>
                                  </div>
                                </td>
                                <td> {{i.Category}} </td>
                                <td> {{i.date}}</td>
                                <td><a class="nav-link" onclick="Open('{{i.id}}')"  >
                                  <span class="icon-bg">
                                    <i class="mdi mdi-file-document-box menu-icon"></i>
                                  </span>
                                  <span class="menu-title">Delete</span>
                                </a></td>
                              </tr>
                             {% endfor %}
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>







                  </div>
                </div>
              </div>
            </div>
          </div>


          		
<div id="cover"  style="background-color: rgba(15, 15, 15, 0.514);width: 100%;height: 100%;position: fixed;top:0px;text-align: center;visibility: hidden">
	<div class="col-xl-4 col-lg-4 col-xxl-4 col-md-12" style="position: fixed;top:30%;left: 40%;">
		<div class="card" id="cmain" style="visibility: hidden">
			<div class="card-body text-center ai-icon  text-primary" >
				<button style="position: absolute;right: 20px;" class="btn btn-sm btn-danger" onclick="Close()">x</button>
				<svg id="icon-customers" xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user">
					<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" style="stroke-dasharray: 25, 45; stroke-dashoffset: 0;"></path>
					<path d="M8,7A4,4 0,1,1 16,7A4,4 0,1,1 8,7" style="stroke-dasharray: 26, 46; stroke-dashoffset: 0;"></path>
				</svg>
				<h4 class="my-2">Type "YES" in the form below to delete Account.</h4>
				<div class="form-group" >
					
					<input type="text" id="pass2" class="form-control" style="text-align: center;" >
				</div>
				<button onclick="Delete()" id="si_button" class="btn my-2 btn-primary btn-lg px-4"><i class="fa fa-trash"></i> Delete</button>
			</div>
		</div>
	</div>
</div>
<input id="state" type="hidden">

          <!-- content-wrapper ends -->
          <!-- partial:partials/_footer.html -->
          <footer class="footer">
            <div class="footer-inner-wraper">
              <div class="d-sm-flex justify-content-center justify-content-sm-between">
                <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Copyright © ClearText 2023</span>
                <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">  <a href="https://www.bootstrapdash.com/" target="_blank">ClearText dashboard </a> </span>
              </div>
            </div>
          </footer>
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="{% get_static_prefix %}Manager/assets/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script src="{% get_static_prefix %}Manager/assets/vendors/chart.js/Chart.min.js"></script>
    <script src="{% get_static_prefix %}Manager/assets/vendors/jquery-circle-progress/js/circle-progress.min.js"></script>
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="{% get_static_prefix %}Manager/assets/js/off-canvas.js"></script>
    <script src="{% get_static_prefix %}Manager/assets/js/hoverable-collapse.js"></script>
    <script src="{% get_static_prefix %}Manager/assets/js/misc.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page -->
    <script src="{% get_static_prefix %}Manager/assets/js/dashboard.js"></script>
    <!-- End custom js for this page -->
  </body>
</html>



<script>
  setInterval(load_all,1000);
function load_all(){
   
    
    var pass2 = document.getElementById("pass2").value
if (pass2==="YES"){

 document.getElementById("si_button").disabled = false;
}else{
 document.getElementById("si_button").disabled = true;
}   
}  

function Open(id){
document.getElementById("state").value = id
document.getElementById('cover').setAttribute("style", "background-color: rgba(15, 15, 15, 0.514);width: 100%;height: 100%;position: fixed;top:0px;text-align: center;visibility: visible")
document.getElementById('cmain').setAttribute("style", "visibility: visible")

}
function Close(){
document.getElementById('cover').setAttribute("style", "visibility: hidden;z-index: 0;")
document.getElementById('cmain').setAttribute("style", "z-index: 0;visibility: hidden;")

}
function Delete(){
var id = document.getElementById("state").value
data = JSON.stringify({
id:id,
})
fetch("{% url 'delete_book' %}", {
method: 'POST',
body: data,
headers: { 'X-CSRFToken': csrftoken,'Accept': 'application/json, text/plain, */*',
    'Content-Type': 'application/json',
    },
})
.then(response => response.json())
.then(data => {
if (data === 'Ok'){
    document.getElementById(id).remove() 


    alert("Book has been deleted successfully!")
Close()
}else{
    alert("Please an error occured when deleting bool!")

}
});}
</script>